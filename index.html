<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="proxy-url" content="https://apikey.wldjs6509.workers.dev">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#a684ff" />
  <title>FFINISH — DailyMyDay</title>

  <!-- 파비콘/아이콘 (원하면 /assets 로 옮겨도 됨) -->
  <link rel="icon" href="./favicon.ico" />
  <link rel="apple-touch-icon" href="./favicon.ico" />

  <!-- PWA-ish -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <link rel="stylesheet" href="./style.css?v=1" />
</head>
<body>
  <div class="app">
    <header class="hdr">
      <div class="brand">DailyMyDay</div>
      <div id="headerDate" class="pill"></div>
    </header>

    <!-- 캘린더 -->
    <main id="view-calendar" class="view active" role="main">
      <section class="card">
        <div class="cal-header">
          <button id="prevMonth" class="iconbtn" aria-label="이전 달">⟵</button>
          <h1 id="calTitle" class="cal-title">Loading…</h1>
          <button id="nextMonth" class="iconbtn" aria-label="다음 달">⟶</button>
        </div>
        <div class="weekday">
          <div>일</div><div>월</div><div>화</div><div>수</div><div>목</div><div>금</div><div>토</div>
        </div>
        <div id="calGrid" class="grid" aria-label="달력 날짜 그리드"></div>
        <p class="hint">날짜를 눌러 감정/칭찬을 기록하세요.</p>
      </section>
    </main>

    <!-- 감정 -->
    <section id="view-mood" class="view">
      <section class="card">
        <div class="soft">선택한 날짜</div>
        <h2 id="selectedDateText">—</h2>

        <div class="moods">
          <label class="mood"><input type="radio" name="mood" value="행복"><div class="emoji">😊</div><div class="moodlabel">행복</div></label>
          <label class="mood"><input type="radio" name="mood" value="차분"><div class="emoji">🌿</div><div class="moodlabel">차분</div></label>
          <label class="mood"><input type="radio" name="mood" value="설렘"><div class="emoji">✨</div><div class="moodlabel">설렘</div></label>
          <label class="mood"><input type="radio" name="mood" value="살짝 우울"><div class="emoji">🌧️</div><div class="moodlabel">우울</div></label>
          <label class="mood"><input type="radio" name="mood" value="피곤"><div class="emoji">😴</div><div class="moodlabel">피곤</div></label>
        </div>

        <div class="praiseBox">
          <div class="soft">나에게 하는 한 줄 칭찬</div>
          <input id="praise" class="praise" placeholder="오늘의 나, 잘한 것…" maxlength="60" inputmode="text" />
          <div class="praiseCount"><span id="praiseCount">0</span>/60</div>
        </div>

        <div class="row-right">
          <button id="goWrite" class="btn primary">일기 쓰러 가기 ⟶</button>
        </div>
      </section>
    </section>

    <!-- 작성 -->
    <section id="view-write" class="view">
      <section class="card">
        <div class="writeHeader">
          <div>
            <div class="soft">선택한 날짜</div>
            <div id="writeDate" class="writeDate">—</div>
          </div>
          <div id="writeMood" class="badge">감정: —</div>
        </div>

        <textarea id="diary" class="diary" placeholder="하루 일과를 자유롭게 적어보세요." aria-label="일기 작성"></textarea>
        <div class="writeMeta">
          <div class="soft">AI 요약은 선택 사항이에요.</div>
          <div class="soft" id="count">0자</div>
        </div>

        <div class="row-right gap">
          <button id="btnSummary" class="btn ghost">AI 요약</button>
          <button id="btnSave" class="btn primary">저장</button>
        </div>
      </section>
    </section>

    <!-- 기록 -->
    <section id="view-records" class="view">
      <section class="card">
        <h3>기록</h3>
        <div id="recordList" class="list"></div>
        <p class="soft mt8">이 장치(LocalStorage)에만 저장됩니다.</p>
      </section>
    </section>

    <!-- 통계 -->
    <section id="view-stats" class="view">
      <section class="card">
        <h3>감정 통계</h3>
        <div class="rangeRow">
          <div class="soft">범위</div>
          <select id="statsRange">
            <option value="30">최근 30일</option>
            <option value="90">최근 90일</option>
            <option value="365">최근 1년</option>
            <option value="all">전체</option>
          </select>
        </div>
        <div id="statsChips" class="mt12"></div>
        <canvas id="statsCanvas" width="700" height="280" class="statsCanvas" aria-label="감정 통계 차트"></canvas>
      </section>
    </section>

    <!-- 하단 탭 -->
    <nav class="nav" role="navigation">
      <div class="tabs">
        <button class="tab active" data-tab="calendar">캘린더</button>
        <button class="tab" data-tab="mood">감정</button>
        <button class="tab" data-tab="write">작성</button>
        <button class="tab" data-tab="records">기록</button>
        <button class="tab" data-tab="stats">통계</button>
      </div>
    </nav>
  </div>

  <!-- 요약 모달 -->
  <div id="modal" class="modal" style="display:none">
    <div class="modalBody">
      <h3>AI 요약</h3>
      <div id="summaryBox" class="summaryBox"></div>
      <div class="modalActions">
        <button id="closeModal" class="btn">닫기</button>
      </div>
    </div>
  </div>

  <!-- 상세 모달 -->
  <div id="detailModal" class="modal" style="display:none">
    <div class="modalBody">
      <h3 id="detailTitle">기록 상세</h3>
      <div id="detailDiary" class="detailDiary"></div>
      <div class="modalActions">
        <button id="deleteEntry" class="btn danger">삭제</button>
        <button id="closeDetail" class="btn primary">닫기</button>
      </div>
    </div>
  </div>

  <script src="./app.js?v=1" defer></script>
</body>
</html>
